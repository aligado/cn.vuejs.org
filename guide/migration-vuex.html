
<!DOCTYPE html>
<html lang="en">
    <head>
        <title>Migration from Vuex 0.6.x to 1.0 - vue.js</title>
        <meta charset="utf-8">
        <meta name="description" content="Vue.js - Intuitive, Fast and Composable MVVM for building interactive interfaces.">
        <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
        <link rel="icon" href="/images/logo.png" type="image/x-icon">
        <script>
            window.PAGE_TYPE = "guide"
        </script>
        <link rel="stylesheet" href="/css/page.css">
        
        <script src="/js/vue.js"></script>
    </head>
    <body class="docs">        <div id="mobile-bar" >
            <a class="menu-button"></a>
            <a class="logo" href="/"></a>
        </div>
        <div id="header">
  <a id="logo" href="/">
    <img src="/images/logo.png">
    <span>Vue.js v2.0 中文</span>
  </a>
  <span style="
    position: absolute;
    top: 100%;
    left: 60px;
    padding: 0 10px;
    background: #ef9f00;
    border-radius: 3px;
    margin-top: -15px;
    line-height: 30px;
    color: white;
    font-weight: 400;
    letter-spacing: 1px;
    box-shadow: 0 1px 2px rgba(0,0,0,.3);
  ">
  进群参与:427447379
  </span>
  <ul id="nav">
    <li><a href="/guide/" class="nav-link current">教程</a></li>
<li><a href="/api/" class="nav-link">API</a></li>
<li><a href="/about/" class="nav-link">参与贡献</a></li>
<li><a href="/vue-router/" class="nav-link">vue-router</a></li>
<li><a href="/vuex/" class="nav-link current">vuex</a></li>
<li><a href="/examples/" class="nav-link">示例</a></li>
<li><a href="/more/" class="nav-link">更多</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">社区</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/vuejs/vue" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">论坛</a></li>
    <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">聊天室</a></li>
    <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>


  </ul>
</div>

        
            <div id="main" class="fix-sidebar">
                
                    
    <div class="sidebar">
    <ul class="main-menu">
        <li><a href="/guide/" class="nav-link current">教程</a></li>
<li><a href="/api/" class="nav-link">API</a></li>
<li><a href="/about/" class="nav-link">参与贡献</a></li>
<li><a href="/vue-router/" class="nav-link">vue-router</a></li>
<li><a href="/vuex/" class="nav-link current">vuex</a></li>
<li><a href="/examples/" class="nav-link">示例</a></li>
<li><a href="/more/" class="nav-link">更多</a></li>
<li class="nav-dropdown-container">
  <a class="nav-link">社区</a><span class="arrow"></span>
  <ul class="nav-dropdown">
    <li><a href="https://github.com/vuejs/vue" class="nav-link" target="_blank">GitHub</a></li>
    <li><a href="http://forum.vuejs.org" class="nav-link" target="_blank">论坛</a></li>
    <li><a href="https://gitter.im/vuejs/vue" class="nav-link" target="_blank">聊天室</a></li>
    <li><a href="https://twitter.com/vuejs" class="nav-link" target="_blank">Twitter</a></li>
  </ul>
</li>


    </ul>
    <div class="list">
        <div id="donate" style="margin-bottom: 20px">
            <span class="wrapper" style="width: 110px">
              <img src="/images/patreon.png">
              <a href="/support-vuejs">支持 Vue.js</a>
            </span>
        </div>
        <h2>
            
            教程
            <select class="version-select">
                <option value="SELF" selected>2.0</option>
            </select>
        </h2>
        <ul class="menu-root">
            
                
                
                  <li><h3>基础</h3></li>
                
                
                
                
                <li>
                    <a href="/guide/installation.html" class="sidebar-link">安装</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/index.html" class="sidebar-link">介绍</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/instance.html" class="sidebar-link">Vue 实例</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/syntax.html" class="sidebar-link">模板语法</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/computed.html" class="sidebar-link">计算属性</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/class-and-style.html" class="sidebar-link">Class 与 Style 绑定</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/conditional.html" class="sidebar-link">条件渲染</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/list.html" class="sidebar-link">列表渲染</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/events.html" class="sidebar-link">事件处理器</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/forms.html" class="sidebar-link">表单控件绑定</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/components.html" class="sidebar-link">组件</a>
                </li>
            
                
                
                
                  <li><h3>进阶</h3></li>
                
                
                
                <li>
                    <a href="/guide/transitions.html" class="sidebar-link">过渡效果</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/transitioning-state.html" class="sidebar-link">过渡状态</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/render-function.html" class="sidebar-link">Render 函数</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/reactivity.html" class="sidebar-link">深入响应式原理</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/custom-directive.html" class="sidebar-link">自定义指令</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/mixins.html" class="sidebar-link">混合</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/plugins.html" class="sidebar-link">插件</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/single-file-components.html" class="sidebar-link">单文件组件</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/deployment.html" class="sidebar-link">生产环境部署</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/routing.html" class="sidebar-link">路由</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/state-management.html" class="sidebar-link">状态管理</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/unit-testing.html" class="sidebar-link">单元测试</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/ssr.html" class="sidebar-link">服务端渲染</a>
                </li>
            
                
                
                
                
                  <li><h3>迁移</h3></li>
                
                
                <li>
                    <a href="/guide/migration.html" class="sidebar-link">从 Vue1.x 迁移</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/migration-vue-router.html" class="sidebar-link">从 Vue Router 0.7.x 迁移</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/migration-vuex.html" class="sidebar-link current">Migration from Vuex 0.6.x to 1.0</a>
                </li>
            
                
                
                
                
                
                  <li><h3>更多</h3></li>
                
                <li>
                    <a href="/guide/comparison.html" class="sidebar-link">对比其他框架</a>
                </li>
            
                
                
                
                
                
                <li>
                    <a href="/guide/join.html" class="sidebar-link">加入Vue.js社区</a>
                </li>
            
             
        </ul>
    </div>
</div>


<div class="content guide with-sidebar migration-vuex-guide">
    
      

    
    
      <h1>Migration from Vuex 0.6.x to 1.0</h1>
    
    <blockquote>
<p>Vuex 2.0 is released, but this guide only covers the migration to 1.0? Is that a typo? Also, it looks like Vuex 1.0 and 2.0 were released simultaneously. What’s going on? Which one should I use and what’s compatible with Vue 2.0?</p>
</blockquote>
<p>Both Vuex 1.0 and 2.0:</p>
<ul>
<li>fully support both Vue 1.0 and 2.0</li>
<li>will be maintained for the forseeable future</li>
</ul>
<p>They have slightly different target users however.</p>
<p><strong>Vuex 2.0</strong> is a radical redesign and simplification of the API, for those who are starting new projects or want to be on the cutting edge of client-side state management. <strong>It is not covered by this migration guide</strong>, so you should check out <a href="https://vuex.vuejs.org/en/index.html" target="_blank" rel="external">the Vuex 2.0 docs</a> if you’d like to learn more about it.</p>
<p><strong>Vuex 1.0</strong> is mostly backwards-compatible, so requires very few changes to upgrade. It is recommended for those with large existing codebases or who just want the smoothest possible upgrade path to Vue 2.0. This guide is dedicated to facilitating that process, but only includes migration notes. For the complete usage guide, see <a href="https://github.com/vuejs/vuex/tree/1.0/docs/en" target="_blank" rel="external">the Vuex 1.0 docs</a>.</p>
<p class="tip">The list of deprecations below should be relatively complete, but the migration helper is still being updated to catch them.</p>

<h2 id="store-watch-with-String-Property-Path-deprecated"><a href="#store-watch-with-String-Property-Path-deprecated" class="headerlink" title="store.watch with String Property Path deprecated"></a><code>store.watch</code> with String Property Path <sup>deprecated</sup></h2><p><code>store.watch</code> now only accept functions. So for example, you would have to replace:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">store.watch(<span class="string">'user.notifications'</span>, callback)</div></pre></td></tr></table></figure>
<p>with:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line">store.watch(</div><div class="line">  <span class="comment">// When the returned result changes...</span></div><div class="line">  <span class="function"><span class="keyword">function</span> (<span class="params">state</span>) </span>&#123;</div><div class="line">    <span class="keyword">return</span> state.user.notifications</div><div class="line">  &#125;,</div><div class="line">  <span class="comment">// Run this callback</span></div><div class="line">  callback</div><div class="line">)</div></pre></td></tr></table></figure>
<p>This gives you more complete control over the reactive properties you’d like to watch.</p>

<div class="upgrade-path">
  <h4>Upgrade Path</h4>
  <p>Run the <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> on your codebase to find examples of <code>store.watch</code> with a string as the first argument.</p>
</div>

<h2 id="Store’s-Event-Emitter-deprecated"><a href="#Store’s-Event-Emitter-deprecated" class="headerlink" title="Store’s Event Emitter deprecated"></a>Store’s Event Emitter <sup>deprecated</sup></h2><p>The store instance no longer exposes the event emitter interface (<code>on</code>, <code>off</code>, <code>emit</code>). If you were previously using the store as a global event bus, <a href="http://vuejs.org/guide/migration.html#dispatch-and-broadcast-deprecated" target="_blank" rel="external">see this section</a> for migration instructions.</p>
<p>Instead of using this interface to watch events emitted by the store itself (e.g. <code>store.on(&#39;mutation&#39;, callback)</code>), a new method <code>store.subscribe</code> is introduced. Typical usage inside a plugin would be:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">var</span> myPlugin = <span class="function"><span class="params">store</span> =&gt;</span> &#123;</div><div class="line">  store.subscribe(<span class="function"><span class="keyword">function</span> (<span class="params">mutation, state</span>) </span>&#123;</div><div class="line">    <span class="comment">// Do something...</span></div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>See example <a href="https://github.com/vuejs/vuex/blob/1.0/docs/en/plugins.md" target="_blank" rel="external">the plugins docs</a> for more info.</p>

<div class="upgrade-path">
  <h4>Upgrade Path</h4>
  <p>Run the <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> on your codebase to find examples of <code>store.on</code>, <code>store.off</code>, and <code>store.emit</code>.</p>
</div>

<h2 id="Middlewares-deprecated"><a href="#Middlewares-deprecated" class="headerlink" title="Middlewares deprecated"></a>Middlewares <sup>deprecated</sup></h2><p>Middlewares are replaced by plugins. A plugin is simply a function that receives the store as the only argument, and can listen to the mutation event on the store:</p>
<figure class="highlight js"><table><tr><td class="code"><pre><div class="line"><span class="keyword">const</span> myPlugins = <span class="function"><span class="params">store</span> =&gt;</span> &#123;</div><div class="line">  store.subscribe(<span class="string">'mutation'</span>, (mutation, state) =&gt; &#123;</div><div class="line">    <span class="comment">// Do something...</span></div><div class="line">  &#125;)</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>For more details, see <a href="https://github.com/vuejs/vuex/blob/1.0/docs/en/plugins.md" target="_blank" rel="external">the plugins docs</a>.</p>

<div class="upgrade-path">
  <h4>Upgrade Path</h4>
  <p>Run the <a href="https://github.com/vuejs/vue-migration-helper" target="_blank" rel="external">migration helper</a> on your codebase to find examples of the <code>middlewares</code> option on a store.</p>
</div>


    
      <div class="guide-links">
        
          <span>← <a href="/guide/migration-vue-router.html">从 Vue Router 0.7.x 迁移</a></span>
        
        
          <span style="float:right"><a href="/guide/comparison.html">对比其他框架</a> →</span>
        
      </div>
    
    <div class="footer">
      发现错误？想参与编辑？
      <a href="https://github.com/dingyiming/vuejs.org/tree/2.0-cn/src/guide/migration-vuex.md" target="_blank">
        在 Github 上编辑此页！
      </a>
    </div>
</div>

                
            </div>
            <script src="/js/smooth-scroll.min.js"></script>
            <script src="/js/common.js"></script>
        

        <script src="//cdn.bootcss.com/fastclick/1.0.6/fastclick.min.js"></script>
        <script>
            document.addEventListener('DOMContentLoaded', function() {
                FastClick.attach(document.body);
            }, false);
        </script>
    </body>
</html>
